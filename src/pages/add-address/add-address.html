<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Adicionar endereço</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="formGroup" (ngSubmit)="insertAddress(); $event.preventDefault()">

    <ion-card>
      <ion-card-header>
        <b>Dados do endereço</b>
      </ion-card-header>

      <ion-item>
        <ion-label stacked>Logradouro</ion-label>
        <ion-input formControlName="street" type="text"></ion-input>
      </ion-item>
      <p class="danger" *ngIf="formGroup.controls.street.dirty && formGroup.controls.street.errors"  margin-left>Valor inválido</p>
  
      <ion-item>
        <ion-label stacked>Número</ion-label>
        <ion-input formControlName="number" type="text"></ion-input>
      </ion-item>
      <p class="danger" *ngIf="formGroup.controls.number.dirty && formGroup.controls.number.errors"  margin-left>Valor inválido</p>
      
      <ion-item>
        <ion-label stacked>Complemento</ion-label>
        <ion-input formControlName="complement" type="text"></ion-input>
      </ion-item>
  
      <ion-item>
        <ion-label stacked>Bairro</ion-label>
        <ion-input formControlName="district" type="text"></ion-input>
      </ion-item>
  
      <ion-item>
        <ion-label stacked>CEP</ion-label>
        <ion-input formControlName="cep" type="text"></ion-input>
      </ion-item>
      <p class="danger" *ngIf="formGroup.controls.cep.dirty && formGroup.controls.cep.errors"  margin-left>Valor inválido</p>
  
      <ion-item>
        <ion-label stacked>Estado</ion-label>
        <ion-select formControlName="stateId" (ionChange)="updateCities()">
          <ion-option *ngFor="let state of states; first as f" [value]="state.id" [selected]="f">{{state.name}}</ion-option>
        </ion-select>
      </ion-item>
  
      <ion-item>
        <ion-label stacked>Cidade</ion-label>
        <ion-select formControlName="cityId">
          <ion-option *ngFor="let city of cities" [value]="city.id">{{city.name}}</ion-option>
        </ion-select>
      </ion-item>

      <button ion-button block type="submit" [disabled]="formGroup.invalid">Adicionar endereço</button>
    </ion-card>
  
  </form>
</ion-content>
